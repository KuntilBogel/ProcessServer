<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Player</title>
  <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
  <link rel="stylesheet" href="https://cdn.plyr.io/3.4.6/plyr.css">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="./dist/bundle.js" ></script>
</head>

<body>
  <div class="container">
    <video controls crossorigin playsinline id="player">
      <!-- Video files -->
      <source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" type="video/mp4" size="576"
        id="main_vid">

      <track kind="captions" label="Custom Subtitle" srclang="en" id="main_sub"
        src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-HD.en.vtt" default>


      <!-- <a href="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" download id="main_vid_dl">Download</a> -->
    </video>

    <div class="actions">
      <button type="button" class="btn js-play">Play</button>
      <button type="button" class="btn js-pause">Pause</button>
      <button type="button" class="btn js-stop">Stop</button>
      <button type="button" class="btn js-rewind">Rewind</button>
      <button type="button" class="btn js-forward">Forward</button>
    </div>
  </div>
</body>
<!-- <script>
  // document.querySelector("#main_vid_dl").href = params.get("videolink")
  const params = new URLSearchParams(window.location.search)
  let subtitle = params.get("subtitlelink"),
      main_sub = document.querySelector("#main_sub")
  if(subtitle) {
    // const subtitleext = subtitle.includes(".srt") ? "srt" : (subtitle.includes(".ass") ? "ass" : null);
  document.querySelector("#main_vid").src = params.get("videolink");
  fetch(subtitle).then(async p => {
    const resp = await p.text()
    let ha = ""
    // document.querySelector("#main_sub").src = URL.createObjectURL(new Blob([webvtt_subtitler(subtitleext, resp)], { type: 'text/vtt' }));
  })
  }else{
    main_sub.remove()
  }
  

  const player = new Plyr('#player');


  document.addEventListener('DOMContentLoaded', () => {
    window.player = player;

    // Bind event listener
    function on(selector, type, callback) {
      document.querySelector(selector).addEventListener(type, callback, false);
    }

    // Play
    on('.js-play', 'click', () => {
      player.play();
    });

    // Pause
    on('.js-pause', 'click', () => {
      player.pause();
    });

    // Stop
    on('.js-stop', 'click', () => {
      player.stop();
    });

    // Rewind
    on('.js-rewind', 'click', () => {
      player.rewind();
    });

    // Forward
    on('.js-forward', 'click', () => {
      player.forward();
    });
  });

  player.on('playing', (event) => {
    const storedTime = localStorage.getItem('plyr-saved-time');
    if (storedTime && storedTime > 1 && storedTime != player.currentTime) {
      player.currentTime = Number(storedTime);
    }
  })

  player.on('ended', () => {
    localStorage.removeItem('plyr-saved-time');
  });

  player.on('timeupdate', (event) => {
    if (player.currentTime != 0) {
      localStorage.setItem('plyr-saved-time', player.currentTime);
    }
  })
</script> -->

</html>